#!/usr/bin/env sh

npm run spell

UNSTAGED=$(git diff --name-only)

if [ -n "$UNSTAGED" ]; then
    echo "❌ Commit failed: You have unstaged changes in the following files:"
    echo "$UNSTAGED"
    echo "Please stage the changes or stash them before committing."
    exit 1
fi

if [ $? -ne 0 ]; then
    echo "❌ Commit failed: Spelling errors detected by cspell."
    exit 1
fi

echo "✅ No spelling errors found."
exit 0
